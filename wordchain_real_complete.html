
<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <title>Ø²Ù†Ø¬ÛŒØ±Ù‡ Ú©Ù„Ù…Ø§Øª Û´ Ø­Ø±ÙÛŒ ÙØ§Ø±Ø³ÛŒ</title>
  <style>
    body { font-family: Tahoma; direction: rtl; padding: 10px; background: #fafafa; }
    .container { display: flex; gap: 8px; overflow-x: auto; padding-bottom:20px; }
    .column { border:1px solid #aaa; padding:6px; border-radius:6px; min-width:120px; position:relative; background:#fff; }
    .column h3,h4 { margin:4px 0; font-size:0.9em; }
    ul { list-style:none; padding:0; max-height:120px; overflow-y:auto; }
    li { cursor:pointer; margin:2px 0; padding:2px 6px; border-radius:4px; font-size:0.9em; }
    li:hover { background:#e0f7fa; }
    .hide-list { display:none; }
    .btn { font-size:0.8em; padding:2px 4px; cursor:pointer; }
    .remove-btn { position:absolute; top:4px; left:4px; }
  </style>
</head>
<body>
  <h2>Ø²Ù†Ø¬ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ Ú©Ù„Ù…Ø§Øª Ú†Ù‡Ø§Ø±Ø­Ø±ÙÛŒ ÙØ§Ø±Ø³ÛŒ (Ø¨Ø§Ù†Ú© ÙˆØ§Ù‚Ø¹ÛŒ)</h2>
  <button onclick="startGame()">ğŸŸ¢ Ø´Ø±ÙˆØ¹ Ù…Ø¬Ø¯Ø¯</button>
  <div class="container" id="chain"></div>

<script>
let wordBank = [];

fetch('https://raw.githubusercontent.com/samanvp/persian-lexicon/main/data/4-letter-words.txt')
  .then(r => r.text())
  .then(txt => {
    wordBank = txt.split(/\r?\n/).filter(w => /^[\u0600-\u06FF]{4}$/.test(w));
    startGame();
  })
  .catch(() => alert("Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¨Ø§Ù†Ú© Ú©Ù„Ù…Ø§Øª (Ø¨Ù‡ Ø§ÛŒÙ†ØªØ±Ù†Øª ÙˆØµÙ„ Ù‡Ø³ØªÛŒØŸ)"));

function addColumn(chars) {
  const [c1,c2] = chars;
  const col = document.createElement('div');
  col.className = 'column';
  col.innerHTML = `
    <button class="btn remove-btn" onclick="removeCol(this)">Ã—</button>
    <h3>Ø­Ø±ÙˆÙ: ${c1}â€“${c2}</h3>
    <button class="btn" onclick="toggleList(this)">Ù†Ù…Ø§ÛŒØ´/Ù¾Ù†Ù‡Ø§Ù†</button>
    <ul></ul><div class="next"></div>`;
  const ul = col.querySelector('ul');
  const matches = wordBank.filter(w => w.includes(c1) && w.includes(c2));
  if (!matches.length) ul.innerHTML = '<li><i>Ù…ÙˆØ±Ø¯ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯</i></li>';
  else matches.forEach(w => {
    const li = document.createElement('li');
    li.textContent = w;
    li.onclick = () => chooseWord(w, col, c1, c2);
    ul.appendChild(li);
  });
  document.getElementById('chain').appendChild(col);
}

function chooseWord(word, col, c1, c2) {
  col.querySelectorAll('li').forEach(li => li.style.display = 'none');
  const leftover = [...word].filter(ch => ![c1,c2].includes(ch));
  col.querySelector('.next').innerHTML = `
    <h4>Ø§Ù†ØªØ®Ø§Ø¨: ${word}</h4>
    <h4>Ø¨Ø§Ù‚ÛŒ: ${leftover.join(', ')}</h4>`;
  if (leftover.length === 2) addColumn(leftover);
}

function toggleList(btn) {
  btn.nextElementSibling.nextElementSibling.classList.toggle('hide-list');
}

function removeCol(btn) {
  btn.parentNode.remove();
}

function startGame() {
  document.getElementById('chain').innerHTML = '';
  const start = prompt('Ø¯Ùˆ Ø­Ø±Ù Ø´Ø±ÙˆØ¹ (ÙØ§Ø±Ø³ÛŒØŒ ÙÙ‚Ø· Û² Ø­Ø±Ù):');
  if (start && start.length === 2) addColumn(start);
  else alert('Ù„Ø·ÙØ§Ù‹ Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ Ø¯Ùˆ Ø­Ø±Ù ÙØ§Ø±Ø³ÛŒ ÙˆØ§Ø±Ø¯ Ú©Ù†.');
}
</script>
</body>
</html>
